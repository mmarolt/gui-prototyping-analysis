<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call Recorder App</title>
    <style>
        /* Base styles */
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden; /* Prevent body scroll when content is fixed */
        }

        /* Mobile Container - Simulates the device screen */
        .mobile-container {
            width: 375px; /* Target width */
            height: 667px; /* Target height */
            background-color: #fff;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            position: relative; /* Crucial for absolute children (overlays, drawers) */
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Hide content overflow within the container */
            border-radius: 8px;
        }

        /* I. Primary Screen Layout */

        /* 1. Top App Bar */
        .top-app-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 16px;
            height: 56px;
            background-color: #6200EE; /* Primary color */
            color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 10;
            flex-shrink: 0; /* Don't shrink when content grows */
        }

        .top-app-bar .icon {
            font-size: 24px;
            cursor: pointer;
            padding: 8px; /* Make icons easier to tap */
            border-radius: 50%;
            transition: background-color 0.2s;
        }
        .top-app-bar .icon:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .top-app-bar .title {
            font-size: 18px;
            font-weight: 500;
            flex-grow: 1; /* Allow title to take available space */
            margin-left: 16px;
        }

        /* 2. Main Content Area */
        .main-content {
            flex-grow: 1; /* Occupy remaining vertical space */
            overflow-y: auto; /* Enable vertical scrolling */
            padding-bottom: 72px; /* Space for bottom nav bar */
            position: relative; /* For FAB positioning */
            background-color: #f8f8f8;
        }

        /* Floating Action Button (FAB) for Filter */
        .fab-filter {
            position: absolute;
            top: 16px; /* Positioned relative to main-content */
            right: 16px;
            width: 48px;
            height: 48px;
            background-color: #03DAC5; /* Secondary color */
            color: #fff;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 5; /* Above list items */
            transition: background-color 0.2s, transform 0.2s;
        }
        .fab-filter:hover {
            background-color: #018786;
            transform: scale(1.05);
        }

        /* Call List Item */
        .call-list {
            padding: 0;
            margin: 0;
            list-style: none;
        }

        .call-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-bottom: 1px solid #eee;
            background-color: #fff;
            position: relative;
            cursor: pointer;
            transition: background-color 0.1s ease-in-out;
        }
        .call-item:hover {
            background-color: #f5f5f5;
        }
        .call-item:last-child {
            border-bottom: none;
        }

        .call-info {
            flex-grow: 1;
        }
        .call-info .name {
            font-weight: 600;
            color: #333;
            font-size: 16px;
        }
        .call-info .number {
            font-size: 14px;
            color: #666;
            margin-top: 2px;
        }
        .call-info .metadata {
            font-size: 12px;
            color: #999;
            margin-top: 4px;
            display: flex; /* For aligning metadata elements */
            align-items: center;
            flex-wrap: wrap; /* Allow wrapping on smaller content */
        }
        .call-info .metadata span {
            margin-right: 8px;
        }
        .call-info .metadata .call-type {
            font-weight: bold;
        }
        .call-info .metadata .incoming { color: #4CAF50; } /* Green */
        .call-info .metadata .outgoing { color: #2196F3; } /* Blue */
        .call-info .metadata .missed { color: #F44336; } /* Red */

        .call-info .metadata .rec-badge {
            background-color: #03DAC5; /* Secondary color */
            color: #fff;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: bold;
            margin-left: auto; /* Push to the right if space allows */
            margin-right: 0;
            line-height: 1; /* Ensure text fits well */
            white-space: nowrap; /* Prevent "REC" from breaking */
        }

        .recording-toggle {
            font-size: 20px;
            color: #ccc;
            padding: 8px;
            cursor: pointer;
            margin-left: 8px;
        }
        .recording-toggle.active {
            color: #03DAC5; /* Secondary color for active */
        }

        /* 3. Bottom Navigation Bar */
        .bottom-nav-bar {
            display: flex;
            justify-content: space-around;
            align-items: center;
            height: 64px;
            background-color: #fff;
            border-top: 1px solid #eee;
            box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.05);
            z-index: 10;
            flex-shrink: 0; /* Don't shrink */
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #999;
            font-size: 12px;
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            transition: color 0.2s, background-color 0.2s;
        }
        .nav-item.active {
            color: #6200EE; /* Primary color for active tab */
        }
        .nav-item:hover {
            background-color: #f0f0f0;
        }
        .nav-item .icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        /* II. Navigation Drawer (Hidden by default) */
        .nav-drawer {
            position: absolute; /* Positioned relative to .mobile-container */
            top: 0;
            left: -100%; /* Hidden off-screen */
            width: 75%; /* Common drawer width */
            max-width: 300px; /* Max width for wider screens */
            height: 100%;
            background-color: #fff;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.2);
            z-index: 100;
            transition: left 0.3s ease-out;
            display: flex;
            flex-direction: column;
        }
        .nav-drawer.open {
            left: 0; /* Visible */
        }

        .nav-drawer-header {
            padding: 24px 16px;
            background-color: #6200EE;
            color: #fff;
            font-size: 20px;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
        }

        .nav-drawer-list {
            list-style: none;
            padding: 0;
            margin: 0;
            flex-grow: 1;
            overflow-y: auto; /* Allow scrolling if many items */
        }
        .nav-drawer-list-item {
            padding: 12px 16px;
            color: #333;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .nav-drawer-list-item:hover {
            background-color: #f0f0f0;
        }

        /* Overlay for drawer/modals (covers the mobile-container only) */
        .overlay {
            position: absolute; /* Positioned relative to .mobile-container */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 90;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
        }
        .overlay.open {
            opacity: 1;
            visibility: visible;
        }

        /* III. Filter Options UI (Modal Bottom Sheet) */
        .filter-options-sheet {
            position: absolute; /* Positioned relative to .mobile-container */
            bottom: -100%; /* Hidden off-screen */
            left: 0;
            width: 100%;
            background-color: #fff;
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.2);
            z-index: 110;
            transition: bottom 0.3s ease-out;
            max-height: 80%; /* Limit height of the sheet */
            display: flex; /* For flex-direction column */
            flex-direction: column;
        }
        .filter-options-sheet.open {
            bottom: 0; /* Visible */
        }

        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border-bottom: 1px solid #eee;
            flex-shrink: 0;
        }
        .filter-header .title {
            font-size: 18px;
            font-weight: 600;
        }
        .filter-header .close-btn {
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.2s;
        }
        .filter-header .close-btn:hover {
            background-color: #f0f0f0;
        }

        .filter-content {
            padding: 16px;
            flex-grow: 1; /* Allow content to grow and scroll */
            overflow-y: auto;
        }
        .filter-category {
            margin-bottom: 20px;
        }
        .filter-category-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            font-size: 15px;
        }
        .filter-option {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .filter-option input[type="radio"],
        .filter-option input[type="checkbox"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            accent-color: #6200EE; /* Primary color */
        }
        .filter-option label {
            font-size: 15px;
            color: #555;
            flex-grow: 1;
        }

        .filter-actions {
            display: flex;
            justify-content: flex-end;
            padding: 16px;
            border-top: 1px solid #eee;
            gap: 10px;
            flex-shrink: 0;
        }
        .filter-actions button {
            padding: 10px 16px;
            border: none;
            border-radius: 4px;
            font-size: 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .filter-actions .clear-btn {
            background-color: #f0f0f0;
            color: #333;
        }
        .filter-actions .clear-btn:hover {
            background-color: #e0e0e0;
        }
        .filter-actions .apply-btn {
            background-color: #6200EE;
            color: #fff;
        }
        .filter-actions .apply-btn:hover {
            background-color: #5400d9;
        }

        /* IV. Search UI (Overlays Top App Bar) */
        .search-bar-overlay {
            position: absolute; /* Positioned relative to .mobile-container */
            top: 0;
            left: 0;
            width: 100%;
            height: 56px;
            background-color: #fff;
            display: flex;
            align-items: center;
            padding: 0 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 15; /* Above main app bar */
            transform: translateY(-100%); /* Hidden initially */
            transition: transform 0.3s ease-out;
        }
        .search-bar-overlay.open {
            transform: translateY(0); /* Visible */
        }

        .search-bar-overlay .back-icon {
            font-size: 24px;
            color: #333;
            padding: 8px;
            cursor: pointer;
        }
        .search-bar-overlay .search-input {
            flex-grow: 1;
            border: none;
            outline: none;
            padding: 8px;
            font-size: 16px;
            margin-left: 8px;
            color: #333;
        }
        .search-bar-overlay .clear-search-icon {
            font-size: 20px;
            color: #999;
            padding: 8px;
            cursor: pointer;
            visibility: hidden; /* Hidden by default, JS will toggle */
        }

        /* V. Settings Screen */
        .settings-screen {
            position: absolute; /* Positioned relative to .mobile-container */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #f8f8f8;
            z-index: 100; /* Above main content */
            transform: translateX(100%); /* Hidden to the right */
            transition: transform 0.3s ease-out;
            display: flex;
            flex-direction: column;
        }
        .settings-screen.open {
            transform: translateX(0); /* Visible */
        }

        .settings-top-bar {
            display: flex;
            align-items: center;
            padding: 0 16px;
            height: 56px;
            background-color: #6200EE;
            color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            flex-shrink: 0;
        }
        .settings-top-bar .back-icon {
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.2s;
        }
        .settings-top-bar .back-icon:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .settings-top-bar .title {
            font-size: 18px;
            font-weight: 500;
            margin-left: 16px;
        }

        .settings-content {
            flex-grow: 1;
            overflow-y: auto;
            padding: 16px;
        }

        .settings-section {
            background-color: #fff;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }
        .settings-section-title {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
            border-bottom: 1px solid #eee;
            padding-bottom: 8px;
        }

        .setting-option {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .setting-option input[type="radio"] {
            margin-right: 10px;
            width: 18px;
            height: 18px;
            accent-color: #6200EE;
        }
        .setting-option label {
            font-size: 15px;
            color: #555;
            flex-grow: 1;
        }
        .setting-option:last-child {
            margin-bottom: 0;
        }
    </style>
</head>
<body>
    <div class="mobile-container">

        <!-- I. Primary Screen Layout -->

        <!-- 1. Top App Bar -->
        <div class="top-app-bar" id="mainAppBar">
            <span class="icon" onclick="toggleNavDrawer()">&#9776;</span> <!-- Menu Icon (Hamburger) -->
            <span class="title">All Calls</span>
            <span class="icon" onclick="toggleSearchBar()">&#128269;</span> <!-- Search Icon (Magnifying Glass) -->
            <span class="icon" onclick="openSettings()">&#9881;</span> <!-- Settings Icon (Gear) -->
        </div>

        <!-- IV. Search UI (Overlay) -->
        <div class="search-bar-overlay" id="searchBar">
            <span class="back-icon" onclick="toggleSearchBar()">&#8592;</span> <!-- Back Arrow -->
            <input type="text" class="search-input" placeholder="Search contacts or calls" oninput="toggleClearSearchIcon(this)">
            <span class="clear-search-icon" onclick="clearSearchInput()">&times;</span> <!-- Clear Search Icon -->
        </div>

        <!-- 2. Main Content Area -->
        <div class="main-content" id="mainContent">
            <!-- Filter Button (FAB) -->
            <div class="fab-filter" onclick="toggleFilterSheet()">&#x2389;</div> <!-- Filter Icon -->

            <!-- Scrollable View (Call List) -->
            <ul class="call-list">
                <li class="call-item">
                    <div class="call-info">
                        <div class="name">John Doe</div>
                        <div class="number">+1 (555) 123-4567</div>
                        <div class="metadata">
                            <span class="call-type incoming">Incoming</span>
                            <span>Today, 10:30 AM</span>
                            <span>02:15</span>
                            <span class="rec-badge">REC</span>
                        </div>
                    </div>
                    <span class="recording-toggle active">&#127909;</span> <!-- Microphone Icon -->
                </li>
                <li class="call-item">
                    <div class="call-info">
                        <div class="name">Jane Smith</div>
                        <div class="number">+1 (555) 987-6543</div>
                        <div class="metadata">
                            <span class="call-type outgoing">Outgoing</span>
                            <span>Yesterday, 04:00 PM</span>
                            <span>01:00</span>
                            <span class="rec-badge">REC</span>
                        </div>
                    </div>
                    <span class="recording-toggle active">&#127909;</span>
                </li>
                <li class="call-item">
                    <div class="call-info">
                        <div class="name">Unknown Number</div>
                        <div class="number">+1 (555) 111-2222</div>
                        <div class="metadata">
                            <span class="call-type missed">Missed</span>
                            <span>Yesterday, 09:00 AM</span>
                            <span>00:00</span>
                        </div>
                    </div>
                    <span class="recording-toggle">&#127909;</span>
                </li>
                <li class="call-item">
                    <div class="call-info">
                        <div class="name">Alice Johnson</div>
                        <div class="number">+1 (555) 333-4444</div>
                        <div class="metadata">
                            <span class="call-type incoming">Incoming</span>
                            <span>Mon, 02:00 PM</span>
                            <span>05:30</span>
                            <span class="rec-badge">REC</span>
                        </div>
                    </div>
                    <span class="recording-toggle active">&#127909;</span>
                </li>
                <li class="call-item">
                    <div class="call-info">
                        <div class="name">Bob Williams</div>
                        <div class="number">+1 (555) 555-6666</div>
                        <div class="metadata">
                            <span class="call-type outgoing">Outgoing</span>
                            <span>Sun, 11:00 AM</span>
                            <span>00:45</span>
                        </div>
                    </div>
                    <span class="recording-toggle">&#127909;</span>
                </li>
                <li class="call-item">
                    <div class="call-info">
                        <div class="name">Charlie Brown</div>
                        <div class="number">+1 (555) 777-8888</div>
                        <div class="metadata">
                            <span class="call-type incoming">Incoming</span>
                            <span>Sat, 07:00 PM</span>
                            <span>03:00</span>
                            <span class="rec-badge">REC</span>
                        </div>
                    </div>
                    <span class="recording-toggle active">&#127909;</span>
                </li>
                 <li class="call-item">
                    <div class="call-info">
                        <div class="name">David Lee</div>
                        <div class="number">+1 (555) 999-0000</div>
                        <div class="metadata">
                            <span class="call-type outgoing">Outgoing</span>
                            <span>Fri, 09:15 AM</span>
                            <span>01:20</span>
                            <span class="rec-badge">REC</span>
                        </div>
                    </div>
                    <span class="recording-toggle active">&#127909;</span>
                </li>
                <li class="call-item">
                    <div class="call-info">
                        <div class="name">Eva Green</div>
                        <div class="number">+1 (555) 111-3333</div>
                        <div class="metadata">
                            <span class="call-type incoming">Incoming</span>
                            <span>Thu, 03:45 PM</span>
                            <span>00:50</span>
                        </div>
                    </div>
                    <span class="recording-toggle">&#127909;</span>
                </li>
                <li class="call-item">
                    <div class="call-info">
                        <div class="name">Frank White</div>
                        <div class="number">+1 (555) 222-4444</div>
                        <div class="metadata">
                            <span class="call-type missed">Missed</span>
                            <span>Wed, 08:00 AM</span>
                            <span>00:00</span>
                        </div>
                    </div>
                    <span class="recording-toggle">&#127909;</span>
                </li>
            </ul>
        </div>

        <!-- 3. Bottom Navigation Bar -->
        <div class="bottom-nav-bar">
            <div class="nav-item active">
                <span class="icon">&#128222;</span> <!-- Phone Icon -->
                <span>All Calls</span>
            </div>
            <div class="nav-item">
                <span class="icon">&#9733;</span> <!-- Star Icon -->
                <span>Favorites</span>
            </div>
        </div>

        <!-- II. Navigation Drawer -->
        <div class="nav-drawer" id="navDrawer">
            <div class="nav-drawer-header">Call Recorder App</div>
            <ul class="nav-drawer-list">
                <li class="nav-drawer-list-item">About</li>
                <li class="nav-drawer-list-item">Help</li>
                <li class="nav-drawer-list-item">Premium Features</li>
                <li class="nav-drawer-list-item">Privacy Policy</li>
            </ul>
        </div>

        <!-- III. Filter Options UI (Modal Bottom Sheet) -->
        <div class="filter-options-sheet" id="filterSheet">
            <div class="filter-header">
                <span class="title">Filter Calls</span>
                <span class="close-btn" onclick="toggleFilterSheet()">&times;</span>
            </div>
            <div class="filter-content">
                <div class="filter-category">
                    <div class="filter-category-title">Filter by Date</div>
                    <div class="filter-option">
                        <input type="radio" id="dateLastWeek" name="dateFilter" checked>
                        <label for="dateLastWeek">Last Week</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="dateLastMonth" name="dateFilter">
                        <label for="dateLastMonth">Last Month</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="dateCustom" name="dateFilter">
                        <label for="dateCustom">Custom Range</label>
                    </div>
                </div>

                <div class="filter-category">
                    <div class="filter-category-title">Filter by Call Type</div>
                    <div class="filter-option">
                        <input type="checkbox" id="typeIncoming" name="callType" checked>
                        <label for="typeIncoming">Incoming</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="typeOutgoing" name="callType" checked>
                        <label for="typeOutgoing">Outgoing</label>
                    </div>
                    <div class="filter-option">
                        <input type="checkbox" id="typeMissed" name="callType">
                        <label for="typeMissed">Missed</label>
                    </div>
                </div>

                <div class="filter-category">
                    <div class="filter-category-title">Filter by Status</div>
                    <div class="filter-option">
                        <input type="radio" id="statusRecorded" name="recordedStatus">
                        <label for="statusRecorded">Recorded Only</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="statusNotRecorded" name="recordedStatus">
                        <label for="statusNotRecorded">Not Recorded Only</label>
                    </div>
                    <div class="filter-option">
                        <input type="radio" id="statusAll" name="recordedStatus" checked>
                        <label for="statusAll">All</label>
                    </div>
                </div>
            </div>
            <div class="filter-actions">
                <button class="clear-btn">Clear</button>
                <button class="apply-btn">Apply</button>
            </div>
        </div>

        <!-- V. Settings Screen -->
        <div class="settings-screen" id="settingsScreen">
            <div class="settings-top-bar">
                <span class="back-icon" onclick="closeSettings()">&#8592;</span>
                <span class="title">Settings</span>
            </div>
            <div class="settings-content">
                <div class="settings-section">
                    <div class="settings-section-title">Call Recording Preferences</div>
                    <div class="setting-option">
                        <input type="radio" id="recordAll" name="recordingPref" checked>
                        <label for="recordAll">Record All Calls</label>
                    </div>
                    <div class="setting-option">
                        <input type="radio" id="recordContacts" name="recordingPref">
                        <label for="recordContacts">Record Calls from Contacts Only</label>
                    </div>
                    <div class="setting-option">
                        <input type="radio" id="recordUnknown" name="recordingPref">
                        <label for="recordUnknown">Record Calls from Unknown Numbers Only</label>
                    </div>
                </div>
                <div class="settings-section">
                    <div class="settings-section-title">Storage</div>
                    <div class="setting-option">
                        <label>Storage Location</label>
                        <!-- Placeholder for dropdown/button -->
                    </div>
                    <div class="setting-option">
                        <label>Auto Delete Old Recordings</label>
                        <!-- Placeholder for toggle -->
                    </div>
                </div>
                <!-- More settings sections can go here -->
            </div>
        </div>

        <!-- Overlay for modals/drawers - covers the mobile-container -->
        <div class="overlay" id="appOverlay" onclick="closeAllModals()"></div>

    </div>

    <script>
        // Helper to toggle class and overlay
        function toggleElement(elementId, className) {
            const element = document.getElementById(elementId);
            const overlay = document.getElementById('appOverlay');

            if (element.classList.contains(className)) {
                element.classList.remove(className);
                // Only close the overlay if no other modals/drawers are open
                if (!document.querySelector('.nav-drawer.open') &&
                    !document.querySelector('.filter-options-sheet.open') &&
                    !document.querySelector('.search-bar-overlay.open') &&
                    !document.querySelector('.settings-screen.open')) {
                    overlay.classList.remove('open');
                }
            } else {
                // When opening an element, ensure other conflicting modals are closed
                if (elementId === 'navDrawer' || elementId === 'filterSheet' || elementId === 'settingsScreen') {
                    // Close other full-screen/drawer/sheet modals
                    document.getElementById('navDrawer').classList.remove('open');
                    document.getElementById('filterSheet').classList.remove('open');
                    document.getElementById('settingsScreen').classList.remove('open');
                }
                if (elementId !== 'searchBar') { // Search bar doesn't necessarily close others
                    document.getElementById('searchBar').classList.remove('open');
                    document.querySelector('#searchBar .search-input').value = '';
                    document.querySelector('#searchBar .clear-search-icon').style.visibility = 'hidden';
                }

                element.classList.add(className);
                overlay.classList.add('open');
            }
        }

        function toggleNavDrawer() {
            toggleElement('navDrawer', 'open');
        }

        function toggleFilterSheet() {
            toggleElement('filterSheet', 'open');
        }

        function toggleSearchBar() {
            toggleElement('searchBar', 'open');
            const searchInput = document.querySelector('#searchBar .search-input');
            const clearIcon = document.querySelector('#searchBar .clear-search-icon');
            if (document.getElementById('searchBar').classList.contains('open')) {
                searchInput.focus();
                clearIcon.style.visibility = searchInput.value ? 'visible' : 'hidden';
            } else {
                searchInput.value = ''; // Clear search input when closing
                clearIcon.style.visibility = 'hidden';
            }
        }

        function openSettings() {
            toggleElement('settingsScreen', 'open');
        }

        function closeSettings() {
            toggleElement('settingsScreen', 'open'); // Calling toggleElement again will close it
        }

        function closeAllModals() {
            document.getElementById('navDrawer').classList.remove('open');
            document.getElementById('filterSheet').classList.remove('open');
            document.getElementById('searchBar').classList.remove('open');
            document.getElementById('settingsScreen').classList.remove('open');
            document.getElementById('appOverlay').classList.remove('open');
            document.querySelector('#searchBar .search-input').value = ''; // Clear search input
            document.querySelector('#searchBar .clear-search-icon').style.visibility = 'hidden';
        }

        // Toggle recording state for individual call item
        document.querySelectorAll('.recording-toggle').forEach(toggle => {
            toggle.addEventListener('click', function(event) {
                event.stopPropagation(); // Prevent item tap from firing
                this.classList.toggle('active');
            });
        });

        // Toggle 'All Calls' / 'Favorites' tab (conceptual)
        document.querySelectorAll('.bottom-nav-bar .nav-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.bottom-nav-bar .nav-item').forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');

                const titleElement = document.querySelector('.top-app-bar .title');
                const fabFilter = document.querySelector('.fab-filter');
                const callList = document.querySelector('.call-list');
                // In a real app, you would swap out the content here, e.g., load favorite calls
                if (this.textContent.includes('All Calls')) {
                    titleElement.textContent = 'All Calls';
                    fabFilter.style.display = 'flex'; // Show filter button
                    callList.style.display = 'block'; // Show call list
                } else if (this.textContent.includes('Favorites')) {
                    titleElement.textContent = 'Favorites';
                    fabFilter.style.display = 'none'; // Hide filter button for favorites (or change its function)
                    callList.style.display = 'none'; // Hide call list (or show favorites list)
                    // You'd populate a different list here for favorites
                }
            });
        });

        // Show/hide clear search icon based on input
        function toggleClearSearchIcon(input) {
            const clearIcon = input.nextElementSibling; // Assumes clear icon is immediate sibling
            if (input.value.length > 0) {
                clearIcon.style.visibility = 'visible';
            } else {
                clearIcon.style.visibility = 'hidden';
            }
        }

        // Clear search input
        function clearSearchInput() {
            const searchInput = document.querySelector('#searchBar .search-input');
            searchInput.value = '';
            searchInput.focus();
            document.querySelector('#searchBar .clear-search-icon').style.visibility = 'hidden';
        }

        // Initial setup for clear search icon if there's pre-filled text
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.querySelector('#searchBar .search-input');
            if (searchInput) {
                toggleClearSearchIcon(searchInput);
            }
        });

    </script>
</body>
</html>